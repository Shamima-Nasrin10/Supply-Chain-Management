<div class="container">
  <h2>Add Production Product</h2>
  <form (ngSubmit)="saveProductionProduct()" class="production-form">

    <!-- Production Product Details -->
    <div class="row">
      <div class="form-group col-md-4">
        <label for="productSelect" class="form-label">Product:</label>
        <select [(ngModel)]="productionProduct.product.id" id="productSelect" name="product" class="form-select" required>
          <option value="" disabled selected>Select a Product</option>
          <option *ngFor="let product of products" [ngValue]="product.id">{{ product.name }}</option>
        </select>
      </div>
      <div class="form-group col-md-4">
        <label for="batchNumber" class="form-label">Batch Number:</label>
        <input type="number" [(ngModel)]="productionProduct.batchNumber" id="batchNumber" name="batchNumber" class="form-control" required>
      </div>
      <div class="form-group col-md-4">
        <label for="quantity" class="form-label">Quantity:</label>
        <input type="number" [(ngModel)]="productionProduct.quantity" id="quantity" name="quantity" class="form-control" required>
      </div>
    </div>

    <div class="row mt-2">
      <div class="form-group col-md-4">
        <label for="completionDate" class="form-label">Completion Date:</label>
        <input type="date" [(ngModel)]="productionProduct.completionDate" id="completionDate" name="completionDate" class="form-control">
      </div>
      <div class="form-group col-md-4">
        <label for="movedToWarehouseDate" class="form-label">Moved to Warehouse Date:</label>
        <input type="date" [(ngModel)]="productionProduct.movedToWarehouseDate" id="movedToWarehouseDate" name="movedToWarehouseDate" class="form-control">
      </div>
      <div class="form-group col-md-4">
        <label for="statusSelect" class="form-label">Status:</label>
        <select [(ngModel)]="productionProduct.status" id="statusSelect" name="status" class="form-select">
          <option value="" disabled selected>Select Status</option>
          <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
        </select>
      </div>
    </div>

    <!-- Raw Materials Usage Section -->
    <h3 class="mt-3">Raw Materials Used</h3>
    <div *ngFor="let usage of rawMatUsages; let i = index" class="material-row mb-3 p-3 border rounded">
      <div class="row align-items-center">
        <div class="form-group col-md-5">
          <label for="rawMaterial{{i}}" class="form-label">Raw Material:</label>
          <select [(ngModel)]="usage.rawMaterial" id="rawMaterial{{i}}" name="rawMaterial{{i}}" class="form-select" required>
            <option value="" disabled selected>Select Material</option>
            <option *ngFor="let material of rawMaterials" [ngValue]="material">{{ material.name }} (Stock: {{ material.quantity }})</option>
          </select>
        </div>
        <div class="form-group col-md-4">
          <label for="quantity{{i}}" class="form-label">Quantity:</label>
          <input type="number" [(ngModel)]="usage.quantity" id="quantity{{i}}" name="quantity{{i}}" class="form-control" required>
        </div>
        <div class="col-md-3 text-end">
          <button type="button" (click)="removeRawMatUsage(i)" class="btn btn-outline-danger btn-sm">
            <i class="fas fa-minus"></i>
          </button>
        </div>
      </div>
    </div>

    <div class="text-end mb-2">
      <button type="button" (click)="addRawMatUsage()" class="btn btn-outline-primary">
        <i class="fas fa-plus"></i>
      </button>
    </div>

    <!-- Save Button -->
    <div class="text-center">
      <button type="submit" class="btn btn-primary">Save Production Product</button>
    </div>
  </form>
</div>
